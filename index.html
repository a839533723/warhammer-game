<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ˜é”¤40Kï¼šè™šç©ºé»æ˜ v0.3</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <!-- æ ‡é¢˜ -->
        <header class="game-header">
            <h1>âš”ï¸ æˆ˜é”¤40Kï¼šè™šç©ºé»æ˜</h1>
            <div class="subtitle">æˆ˜äº‰æ—¶ä»£ Â· è·é²æ–¯ä¹‹ä¹± v0.3ï¼ˆAIå¢å¼ºç‰ˆï¼‰</div>
        </header>

        <!-- è§’è‰²çŠ¶æ€ -->
        <div class="status-panel">
            <div class="character-status">
                <div class="character-avatar">ğŸ¦¾</div>
                <div class="character-info">
                    <div class="character-name" id="charName">é’›-7</div>
                    <div class="character-class" id="charClass">æé™æˆ˜å£« Lv.1</div>
                    <div class="character-stats">
                        <span class="stat hp">â¤ï¸ <span id="hpValue">100</span>/<span id="hpMax">100</span></span>
                        <span class="stat chaos">ğŸ”® <span id="chaosValue">0</span></span>
                        <span class="stat faith">âœ¨ <span id="faithValue">50</span></span>
                    </div>
                </div>
            </div>
            
            <!-- èµ„æºé¢æ¿ -->
            <div class="resource-panel">
                <div class="resource">
                    <span class="icon">ğŸ“¦</span>
                    <span class="name">ç‰©èµ„</span>
                    <span class="value" id="materialValue">50</span>
                </div>
                <div class="resource">
                    <span class="icon">ğŸ§ </span>
                    <span class="name">æƒ…æŠ¥</span>
                    <span class="value" id="intelligenceValue">10</span>
                </div>
                <div class="resource">
                    <span class="icon">â­</span>
                    <span class="name">ä¿¡ä»°</span>
                    <span class="value" id="faithPointsValue">0</span>
                </div>
            </div>
        </div>

        <!-- æ··æ²Œè¿›åº¦æ¡ -->
        <div class="chaos-container">
            <div class="chaos-bar-label">
                <span>æ··æ²Œä¾µèš€åº¦</span>
                <span class="chaos-value"><span id="chaosBarValue">0</span>/100</span>
            </div>
            <div class="chaos-bar">
                <div class="chaos-fill" id="chaosFill" style="width: 0%"></div>
                <div class="chaos-marker" style="left: 20%">çº¯å‡€</div>
                <div class="chaos-marker" style="left: 50%">ä¸­è…</div>
                <div class="chaos-marker" style="left: 80%">é‡è…</div>
            </div>
            <div class="chaos-phase-label" id="chaosPhaseLabel">å½“å‰é˜¶æ®µï¼šçº¯å‡€</div>
        </div>

        <!-- ä»»åŠ¡å¡åŒºåŸŸ -->
        <div class="card-section" id="cardSection">
            <div class="section-title">ğŸƒ å½“å‰ä»»åŠ¡</div>
            <div class="card-info">
                <span id="cardInfo">æŠ½å–ä»»åŠ¡å¡ç‰Œ...</span>
                <span id="cardTimer">å‰©ä½™å›åˆï¼š3</span>
            </div>
            <div id="currentCardArea">
                <!-- å½“å‰ä»»åŠ¡å¡æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>

        <!-- è°ƒæŸ¥ç³»ç»Ÿï¼ˆæ··æ²Œå¡ï¼‰ -->
        <div class="investigation-section" id="investigationSection" style="display: none;">
            <div class="section-title">ğŸ” è°ƒæŸ¥æ¨¡å¼ - æ‰¾å‡ºæ··æ²Œå†…é¬¼</div>
            
            <div class="suspects-container">
                <!-- å«Œç–‘äººåˆ—è¡¨ -->
                <div class="suspect-card" onclick="interrogate('tam')">
                    <div class="suspect-avatar">ğŸ‘¨â€âœˆï¸</div>
                    <div class="suspect-info">
                        <div class="suspect-name">å¡”å§†</div>
                        <div class="suspect-role">å£«å…µ</div>
                        <div class="suspect-status">
                            <span>å¯ç–‘åº¦: <span id="tamSuspicion">3</span>/10</span>
                            <span>ä¿¡ä»»åº¦: <span id="tamTrust">5</span>/10</span>
                        </div>
                    </div>
                    <button class="action-btn-small">å®¡é—®</button>
                </div>
                
                <div class="suspect-card" onclick="interrogate('carl')">
                    <div class="suspect-avatar">ğŸ“¦</div>
                    <div class="suspect-info">
                        <div class="suspect-name">å¡å°”</div>
                        <div class="suspect-role">å†›éœ€å®˜</div>
                        <div class="suspect-status">
                            <span>å¯ç–‘åº¦: <span id="carlSuspicion">5</span>/10</span>
                            <span>ä¿¡ä»»åº¦: <span id="carlTrust">3</span>/10</span>
                        </div>
                    </div>
                    <button class="action-btn-small">å®¡é—®</button>
                </div>
                
                <div class="suspect-card" onclick="interrogate('yuri')">
                    <div class="suspect-avatar">ğŸ”§</div>
                    <div class="suspect-info">
                        <div class="suspect-name">å°¤é‡Œ</div>
                        <div class="suspect-role">æŠ€æœ¯ç¥ç”«</div>
                        <div class="suspect-status">
                            <span>å¯ç–‘åº¦: <span id="yuriSuspicion">4</span>/10</span>
                            <span>ä¿¡ä»»åº¦: <span id="yuriTrust">2</span>/10</span>
                        </div>
                    </div>
                    <button class="action-btn-small">å®¡é—®</button>
                </div>
            </div>
            
            <!-- è¯æ®åˆ—è¡¨ -->
            <div class="evidence-container">
                <div class="section-subtitle">ğŸ“ æ”¶é›†çš„çº¿ç´¢</div>
                <div id="evidenceList">
                    <p class="empty-text">è¿˜æ²¡æœ‰çº¿ç´¢...</p>
                </div>
            </div>
            
            <!-- æŠ•ç¥¨åŒºåŸŸ -->
            <div class="voting-container">
                <div class="section-subtitle">ğŸ—³ï¸ æŠ•ç¥¨å¤„å†³</div>
                <p>æ”¶é›†è¶³å¤Ÿçº¿ç´¢åï¼Œä½ å¯ä»¥æŠ•ç¥¨å¤„å†³ä½ è®¤ä¸ºçš„å†…é¬¼ã€‚</p>
                <div class="voting-buttons">
                    <button class="action-btn vote-btn" onclick="vote('tam')">å¤„å†³å¡”å§†</button>
                    <button class="action-btn vote-btn" onclick="vote('carl')">å¤„å†³å¡å°”</button>
                    <button class="action-btn vote-btn" onclick="vote('yuri')">å¤„å†³å°¤é‡Œ</button>
                </div>
                <p class="warning">âš ï¸ å¤„å†³é”™è¯¯ä¼šå¢åŠ æ··æ²Œå€¼ï¼</p>
            </div>
        </div>

        <!-- å¯¹è¯åŒºåŸŸ -->
        <div class="dialog-panel" id="dialogPanel">
            <div class="dialog-title">ğŸ“œ æˆ˜å†µæŠ¥å‘Š</div>
            <div class="dialog-content" id="dialogContent">
                <!-- å¯¹è¯æ¶ˆæ¯åŠ¨æ€æ·»åŠ  -->
            </div>
        </div>

        <!-- è¿½éšè€…é¢æ¿ -->
        <div class="followers-section">
            <div class="section-title">ğŸ‘¥ è¿½éšè€…</div>
            <div class="followers-panel" id="followersPanel">
                <p class="empty-text">è¿˜æ²¡æœ‰è¿½éšè€…...</p>
            </div>
        </div>

        <!-- è¡ŒåŠ¨é¢æ¿ -->
        <div class="action-panel">
            <div class="action-title">ğŸ® è¡ŒåŠ¨</div>
            
            <div class="action-categories">
                <button class="action-category" onclick="showCategory('system')">
                    <span class="category-icon">âš™ï¸</span>
                    <span class="category-name">ç³»ç»Ÿ</span>
                </button>
                <button class="action-category" onclick="showCategory('investigation')">
                    <span class="category-icon">ğŸ”</span>
                    <span class="category-name">è°ƒæŸ¥</span>
                </button>
                <button class="action-category" onclick="showCategory('faith')">
                    <span class="category-icon">âœ¨</span>
                    <span class="category-name">ä¿¡ä»°</span>
                </button>
                <button class="action-category" onclick="showCategory('devotion')">
                    <span class="category-icon">ğŸ’•</span>
                    <span class="category-name">çœ·å±</span>
                </button>
            </div>
            
            <!-- ç³»ç»Ÿè¡ŒåŠ¨ -->
            <div class="action-list" id="system-actions" style="display: grid;">
                <button class="action-btn" onclick="saveGame()">
                    ğŸ’¾ å­˜æ¡£
                </button>
                <button class="action-btn" onclick="loadGame()">
                    ğŸ“‚ è¯»æ¡£
                </button>
                <button class="action-btn" onclick="showFullStatus()">
                    ğŸ“Š æŸ¥çœ‹å®Œæ•´çŠ¶æ€
                </button>
                <button class="action-btn" onclick="showBuildingPanel()">
                    ğŸ—ï¸ å»ºç­‘ç³»ç»Ÿ
                </button>
                <button class="action-btn" onclick="showAchievements()">
                    ğŸ† æˆå°±ç³»ç»Ÿ
                </button>
                <button class="action-btn" onclick="showDifficultySelector()">
                    ğŸ¯ éš¾åº¦é€‰æ‹©
                </button>
                <button class="action-btn" onclick="showCombatPanel(getRandomEnemy('chaos'))">
                    âš”ï¸ è‡ªç”±æˆ˜æ–—
                </button>
                <button class="action-btn" onclick="endTurn()">
                    â­ï¸ å›åˆç»“æŸ
                </button>
                <button class="action-btn danger" onclick="resetGame()">
                    ğŸ”„ é‡ç½®æ¸¸æˆ
                </button>
            </div>
            
            <!-- è°ƒæŸ¥è¡ŒåŠ¨ -->
            <div class="action-list" id="investigation-actions" style="display: grid;">
                <button class="action-btn" onclick="interrogate('tam')">
                    ğŸ’¬ å®¡é—®å¡”å§†
                </button>
                <button class="action-btn" onclick="interrogate('carl')">
                    ğŸ’¬ å®¡é—®å¡å°”
                </button>
                <button class="action-btn" onclick="interrogate('yuri')">
                    ğŸ’¬ å®¡é—®å°¤é‡Œ
                </button>
            </div>
            
            <!-- ä¿¡ä»°è¡ŒåŠ¨ -->
            <div class="action-list" id="faith-actions" style="display: grid;">
                <button class="action-btn" onclick="performFaithAction('pray')">
                    ğŸ™ ç¥ˆç¥·
                    <span class="action-cost">æ¶ˆè€—5æƒ…æŠ¥</span>
                </button>
                <button class="action-btn" onclick="performFaithAction('purify')">
                    âœ¨ å‡€åŒ–ä»ªå¼
                    <span class="action-cost">æ¶ˆè€—20ç‰©èµ„</span>
                </button>
            </div>
            
            <!-- çœ·å±è¡ŒåŠ¨ -->
            <div class="action-list" id="devotion-actions" style="display: grid;">
                <button class="action-btn" onclick="performDevotionAction('gift')">
                    ğŸ é€ç¤¼
                    <span class="action-cost">æ¶ˆè€—10ç‰©èµ„</span>
                </button>
                <button class="action-btn" onclick="performDevotionAction('help')">
                    ğŸ¤ å¸®åŠ©
                    <span class="action-cost">æ¶ˆè€—15ç‰©èµ„</span>
                </button>
                <button class="action-btn highlight" onclick="recruitFollower()">
                    ğŸ‘¥ æ‹›å‹Ÿè¿½éšè€…
                    <span class="action-cost">æ¶ˆè€—30ç‰©èµ„</span>
                </button>
            </div>
        </div>

        <!-- è¿›åº¦é¢æ¿ -->
        <div class="progress-panel">
            <div class="progress-item">
                <span class="progress-label">å›åˆ</span>
                <span class="progress-value" id="turnNumber">1</span>
                <span class="progress-max">/14</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">æ··æ²Œå€¼</span>
                <span class="progress-value" id="chaosProgress">0</span>
                <span class="progress-max">/100</span>
            </div>
        </div>
        
        <!-- ä¸ä¼Šè²å¨œå¯¹è¯æŒ‰é’® -->
        <div class="elena-chat-section">
            <button class="elena-btn" onclick="showElenaChat()">
                ğŸ’¬ ä¸ä¼Šè²å¨œå¯¹è¯
            </button>
        </div>
        
        <!-- ä¼Šè²å¨œå¯¹è¯å¼¹çª— -->
        <div class="elena-popup" id="elenaPopup" style="display: none;">
            <div class="elena-popup-content">
                <div class="elena-header">
                    <span class="elena-avatar">ğŸ‘©</span>
                    <span class="elena-name">ä¼Šè²å¨œ</span>
                    <button class="close-btn" onclick="hideElenaChat()">Ã—</button>
                </div>
                <div class="elena-messages" id="elenaMessages">
                    <div class="elena-message">
                        å˜¿ï¼Œå°é¬¼ï¼æœ‰ä»€ä¹ˆéœ€è¦å§å§å¸®å¿™çš„å—ï¼Ÿ
                    </div>
                </div>
                <div class="elena-quick-questions">
                    <button onclick="askElena('card')">è¿™å¼ å¡æ˜¯ä»€ä¹ˆï¼Ÿ</button>
                    <button onclick="askElena('chaos')">æ··æ²Œå€¼æ˜¯ä»€ä¹ˆï¼Ÿ</button>
                    <button onclick="askElena('strategy')">ç°åœ¨è¯¥æ€ä¹ˆåšï¼Ÿ</button>
                    <button onclick="askElena('general')">æ¸¸æˆæ€ä¹ˆç©ï¼Ÿ</button>
                </div>
                <div class="elena-input-area">
                    <input type="text" id="elenaInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." onkeypress="if(event.key==='Enter') sendToElena()">
                    <button onclick="sendToElena()">å‘é€</button>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½JSæ¨¡å— -->
    <script src="js/presetDialogues.js"></script>
    <script src="js/aiSystem.js"></script>
    <script src="js/expandedCards.js"></script>
    <script src="js/achievementSystem.js"></script>
    <script src="js/combatSystem.js"></script>
    <script src="js/buildingSystem.js"></script>
    <script src="js/gameState.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

<!-- éš¾åº¦é€‰æ‹©å™¨ -->
<div class="difficulty-popup" id="difficultyPopup" style="display: none;">
    <div class="difficulty-content">
        <div class="difficulty-header">
            <h2>ğŸ¯ é€‰æ‹©éš¾åº¦</h2>
            <p>éš¾åº¦ä¼šå½±å“æ¸¸æˆä½“éªŒï¼Œè¯·è°¨æ…é€‰æ‹©</p>
        </div>
        <div class="difficulty-options">
            <button class="difficulty-btn easy" onclick="selectDifficulty('easy')">
                <span class="diff-icon">ğŸŸ¢</span>
                <span class="diff-name">ç®€å•</span>
                <span class="diff-desc">æ•Œäººä¼¤å®³-30%ï¼Œèµ„æº+30%</span>
            </button>
            <button class="difficulty-btn normal" onclick="selectDifficulty('normal')">
                <span class="diff-icon">ğŸŸ¡</span>
                <span class="diff-name">æ™®é€š</span>
                <span class="diff-desc">æ ‡å‡†æ¸¸æˆä½“éªŒ</span>
            </button>
            <button class="difficulty-btn hard" onclick="selectDifficulty('hard')">
                <span class="diff-icon">ğŸ”´</span>
                <span class="diff-name">å›°éš¾</span>
                <span class="diff-desc">æ•Œäººä¼¤å®³+30%ï¼Œèµ„æº-20%</span>
            </button>
        </div>
        <button class="close-difficulty" onclick="closeDifficultySelector()">Ã—</button>
    </div>
</div>

<style>
.difficulty-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1001;
}

.difficulty-content {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border: 2px solid #4ade80;
    border-radius: 16px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    text-align: center;
    position: relative;
}

.difficulty-header h2 {
    color: #4ade80;
    margin: 0 0 10px 0;
}

.difficulty-header p {
    color: #a0a0a0;
    margin: 0 0 20px 0;
}

.difficulty-options {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.difficulty-btn {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 20px;
    border: 2px solid #333;
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
}

.difficulty-btn.easy { border-color: #4ade80; }
.difficulty-btn.easy:hover { background: rgba(74, 222, 128, 0.2); }
.difficulty-btn.normal { border-color: #fbbf24; }
.difficulty-btn.normal:hover { background: rgba(251, 191, 36, 0.2); }
.difficulty-btn.hard { border-color: #ef4444; }
.difficulty-btn.hard:hover { background: rgba(239, 68, 68, 0.2); }

.diff-icon { font-size: 32px; }
.diff-name { font-size: 18px; color: #fff; font-weight: bold; flex: 1; }
.diff-desc { font-size: 12px; color: #a0a0a0; }

.close-difficulty {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    color: #fff;
    font-size: 24px;
    cursor: pointer;
}
</style>
