<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AIæµ‹è¯•é¡µé¢</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #1a1a2e; color: #fff; }
        .test-section { background: #2d2d5a; padding: 15px; margin: 10px 0; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        pre { background: #000; padding: 10px; overflow: auto; }
        .success { color: #4ade80; }
        .error { color: #ef4444; }
        .loading { color: #fbbf24; }
    </style>
</head>
<body>
    <h1>ğŸ§ª AIç³»ç»Ÿæµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>1. æµ‹è¯•åƒé—®API</h2>
        <button onclick="testAPI()">ç‚¹å‡»æµ‹è¯•</button>
        <div id="apiResult"></div>
    </div>
    
    <div class="test-section">
        <h2>2. æµ‹è¯•é¢„è®¾å¯¹è¯</h2>
        <button onclick="testPresets()">ç‚¹å‡»æµ‹è¯•</button>
        <div id="presetResult"></div>
    </div>
    
    <div class="test-section">
        <h2>3. æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—</h2>
        <p>è¯·æŒ‰F12æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯</p>
    </div>

    <script>
        const API_KEY = 'sk-7324d922204640fd87ad5ae868b82376';
        
        async function testAPI() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.innerHTML = '<p class="loading">æ­£åœ¨æµ‹è¯•APIè°ƒç”¨...</p>';
            
            try {
                const response = await fetch('https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'qwen-turbo',
                        input: {
                            messages: [{ role: 'user', content: 'ä½ å¥½ï¼Œè¯·ç”¨ä¸­æ–‡å›å¤' }]
                        },
                        parameters: { max_tokens: 100, temperature: 0.7 }
                    })
                });
                
                const data = await response.json();
                console.log('APIå“åº”:', data);
                
                if (data.output && data.output.text) {
                    resultDiv.innerHTML = `<p class="success">âœ… APIè°ƒç”¨æˆåŠŸï¼</p><pre>${data.output.text}</pre>`;
                } else if (data.error) {
                    resultDiv.innerHTML = `<p class="error">âŒ APIé”™è¯¯: ${JSON.stringify(data.error)}</p>`;
                } else {
                    resultDiv.innerHTML = `<p class="error">âŒ æœªçŸ¥å“åº”æ ¼å¼</p><pre>${JSON.stringify(data)}</pre>`;
                }
            } catch (error) {
                console.error('APIè°ƒç”¨é”™è¯¯:', error);
                resultDiv.innerHTML = `<p class="error">âŒ ç½‘ç»œé”™è¯¯: ${error.message}</p>`;
            }
        }
        
        function testPresets() {
            const resultDiv = document.getElementById('presetResult');
            
            // æµ‹è¯•é¢„è®¾å¯¹è¯
            const npcDialogues = {
                tam: ["å¤§äººï¼Œæˆ‘æ˜¨æ™šç¡®å®åœ¨ä»“åº“é™„è¿‘å·¡é€»...", "æœ€è¿‘è¥åœ°é‡Œå¼¥æ¼«ç€ä¸€è‚¡å¥‡æ€ªçš„å‘³é“..."],
                carl: ["ç‰©èµ„æ¸…å•ï¼Ÿç­‰ç­‰ï¼Œæˆ‘éœ€è¦æ ¸å¯¹ä¸€ä¸‹...", "æˆ‘ä¸ºå¸å›½æ•ˆåŠ›äºŒåå¹´ï¼"],
                yuri: ["èµç¾æ¬§å§†å°¼èµ›äºšï¼æœºæ¢°å³æ˜¯çœŸç†...", "è¿™å…·èº«èº¯å·²ç»æ”¹é€ äº†87%..."]
            };
            
            let html = '<p>âœ… é¢„è®¾å¯¹è¯åº“å·²åŠ è½½ï¼š</p>';
            html += '<ul>';
            for (const [npc, dialogues] of Object.entries(npcDialogues)) {
                html += `<li><strong>${npc}:</strong> ${dialogues.length}æ¡å¯¹è¯</li>`;
            }
            html += '</ul>';
            html += '<p>ç¤ºä¾‹ï¼š</p>';
            html += `<pre>å¡”å§†ï¼š${npcDialogues.tam[0]}</pre>`;
            html += `<pre>å¡å°”ï¼š${npcDialogues.carl[0]}</pre>`;
            html += `<pre>å°¤é‡Œï¼š${npcDialogues.yuri[0]}</pre>`;
            
            resultDiv.innerHTML = html;
        }
    </script>
</body>
</html>
